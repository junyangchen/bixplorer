{% extends "projects/base.html" %}
{% load staticfiles %}

{% load i18n %}

{% if not is_popup %}
{% block breadcrumbs %}
<div class="breadcrumbs">
<a href="{% url 'admin:index' %}">{% trans 'Home' %}</a>
&rsaquo;
</div>

first name: {{ user.firstname }}
{% endblock %}
{% endif %}

{% block sidebar %}{% endblock %}

{% block content %}
		<h1>My Profile</h1>
		<hr>
		<div class="col-md-7">
            <div class="panel panel-default widget shade-container">
                <div class="panel-heading">
                    <span class="glyphicon glyphicon-user"></span>
                    <h3 class="panel-title">My profile</h3>
                </div>

                <div class="panel-body">
					<!-- left column -->
			        <div class="col-md-3 col-sm-6 col-xs-12">
			            <div class="text-center">
			                <img src="{% static 'common/imgs/default.jpg' %}" class="avatar img-circle img-thumbnail" alt="avatar">
			            </div>
			        </div>

			        <!-- edit form column -->
			        <div class="col-md-8 col-md-offset-1 col-sm-6 col-xs-12">
			            <form class="form-horizontal" role="form">
			                <div class="form-group">
			                    <label class="col-md-3 control-label">Username:</label>
			                    <div class="col-md-8">
			                        <p class="p_aligh_lable">{{ user.username }}</p>
			                    </div>
			                </div>

			                <div class="form-group">
			                    <label class="col-lg-3 control-label">First name:</label>
			                    <div class="col-lg-8">
			                        <p class="p_aligh_lable active_this" id="profile_first_name">{{ user.first_name }}</p>
	            					<div class="hide_this">
										<input type="text" name="firstName" placeholder="First Name" id="edit_first_name" data-toggle="tooltip"><br />
									</div>			                        
			                    </div>
			                </div>

			                <div class="form-group">
			                    <label class="col-lg-3 control-label">Last name:</label>
			                    <div class="col-lg-8">
			                        <p class="p_aligh_lable active_this" id="profile_last_name">{{ user.last_name }}</p>
	            					<div class="hide_this">
										<input type="text" name="lastName" placeholder="Last Name" id="edit_last_name" data-toggle="tooltip"><br />
									</div>			                        
			                    </div>
			                </div>

			                <div class="form-group">
			                    <label class="col-lg-3 control-label">Email:</label>
			                    <div class="col-lg-8">
			                        <p class="p_aligh_lable active_this" id="profile_email">{{ user.email }}</p>
	            					<div class="hide_this">
										<input type="text" name="email" placeholder="Email" id="edit_email" data-toggle="tooltip"><br />
									</div>			                        
			                    </div>
			                </div>

			                <div class="form-group">
			                    <label class="col-lg-3 control-label">Career:</label>
			                    <div class="col-lg-8">
			                        <p class="p_aligh_lable active_this">Graduate Students</p>
			                    </div>
			                </div>			                

			                <div class="form-group">
			                    <label class="col-lg-3 control-label">Location:</label>
			                    <div class="col-lg-8">
			                        <p class="p_aligh_lable active_this" id="profile_location">My Location</p>
	            					<div class="hide_this">
										<input type="text" name="location" placeholder="Location" id="edit_location" data-toggle="tooltip"><br />
									</div>			                        
			                    </div>
			                </div>

			                <div class="form-group">
			                    <div class="col-md-8">
			                        <div class="col-md-3"></div>
			                        <div class="col-md-8">
			                        	<div class="col-md-4">
		                        			<button type="button" class="btn btn-info btn-xs active_this" id="btn_profile_edit"><span class="glyphicon glyphicon-pencil"></span> Edit</button>

											<button type="button" class="btn btn-success btn-xs hide_this" id="btn_profile_save" data-toggle="popover"><span class="glyphicon glyphicon-ok"></span> save</button>
										</div>

										<div class="col-md-4">
											<button type="button" class="btn btn-default btn-xs hide_this" id="btn_profile_cancel">Cancel</button>
		                        		</div>
										
<!-- 										<div class="col-md-4 col-md-offset-4">
		                        		<button type="button" class="btn btn-info btn-xs" id="btn_edit"><span class="glyphicon glyphicon-lock"></span> Change Password</button>											
										</div> -->		                        		
			                        </div>
			                    </div>
			                </div>
			            </form>
			        </div>
                </div>
            </div>			
		</div>

		<div class="col-md-4 col-md-offset-1">
            <!-- collaborator of a project -->
            <div class="panel panel-default widget shade-container">
                <div class="panel-heading">
                    <span class="glyphicon glyphicon-list-alt"></span>
                    <h3 class="panel-title">My Recent Activities</h3>
                    <span class="label label-info">{{history_actions|length}}</span>
                </div>
                <div class="panel-body">
                    <ul class="list-group">
				        {% for item in history_actions%}
				        	<li class="list-group-item">
                            	<div class="row">
	                                <div class="col-xs-4 col-md-2 left_15_gap">
                                    	<img src="{% static 'common/imgs/default.jpg' %}" class="img-circle img-responsive" alt="" />
                                	</div>
                                	<div class="col-xs-7 col-md-9">
                                		<p>
                                		{{ item.logAction }} 
                                        {% if item.logContentType == 'comment' %}
                                            a comment
                                            To project <a href = '{% url 'projects:detail' item.logObject.pk %}'>{{ item.logObject.project}}</a>
                                        {% elif  item.logContentType == 'collaborationship'%}
                                            a collaborator                                        
                                            {% if item.logObject != None %}
                                                at <a href = '#'>{{ item.logObject }}</a>                                                
                                            {% endif %}
                                        {% elif item.logContentType == 'project'%}    
                                           project <a href = '{% url 'projects:detail' item.logObject.pk %}'>{{ item.logObject.name}}</a>
                                        
                                        {% endif %}
                                            
							            {% if item.change_message != '' %}
                                           , {{ item.change_message }}        
							            {% endif %}
                                		</p>
                                		<div class="mic-info">On {{ item.action_time }}</div>
                                	</div>
                            	</div>
                        	</li>                        	
				        {% endfor %}
						<li class="list-group-item">
                            <div class="row">
                                <div class="col-xs-4 col-md-2 left_15_gap">
                                    <img src="{% static 'common/imgs/default.jpg' %}" class="img-circle img-responsive" alt="" />
                                </div>
                                <div class="col-xs-6 col-md-8">
                                    <p>FAKE: Delete <a href="#">project</a></p>
                                    <div class="mic-info">On a fake time</div>
                                </div>
                                <div class="col-xs-1 col-md-1">
                                    <span class="glyphicon glyphicon-repeat"></span>
                                </div>
                            </div>
                        </li>
						<li class="list-group-item">
                            <div class="row">
                                <div class="col-xs-4 col-md-2 left_15_gap">
                                    <img src="{% static 'common/imgs/default.jpg' %}" class="img-circle img-responsive" alt="" />
                                </div>
                                <div class="col-xs-6 col-md-8">
                                    <p>FAKE: Update <a href="#">project</a></p>
                                    <div class="mic-info">On another fake time</div>
                                </div>
                                <div class="col-xs-1 col-md-1">
                                    <span class="glyphicon glyphicon-repeat"></span>
                                </div>
                            </div>
                        </li>                        				        
                    </ul>
                    <!-- placeholder for more activities -->
                    <a href="#" class="btn btn-info btn-sm btn-block" role="button"><span class="glyphicon glyphicon-refresh"></span> More</a>
                </div>
            </div>			
		</div>
               
	</div>

	<script type="text/javascript" src="{% static 'profile/js/edit.js'%}"></script>
{% endblock %}

